<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
	<!-- <title>Bootstrap Elegant Sign Up Form with Icons</title> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
	<title>Sign Up</title>
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
	<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
	<script src="signup.js"></script>
	<link rel="stylesheet" type="text/css" href="./stylesheets/signup.css">
</head>
<body>
	<nav class="navbar navbar-inverse navbar-static-top">
		<div class="container-fluid">
			<form class="navbar-form navbar-right" method="post" action="/signin" id="signin">
				<div class="form-group">
					<input type="text" class="form-control" placeholder="username" name="emailid">
				</div>
				<div class="form-group">
					<input type="password" class="form-control" placeholder="password" name="password">
				</div>
				<button type="submit" class="btn btn-success">Sign In</button>
			</form>
		</div>
	</nav>
	<!-- <div class="container-fluid">
		<div class="jumbotron">
			
			<form class="form" id="newEntryForm">
				<div class="form-group">
					<label for="firstname">Firstname
						<input type="text" class="form-control" id="firstname" name="firstname">
					</label>
				</div>
				<div class="form-group">
					<label for="lastname">Lastname
						<input type="text" class="form-control" id="lastname" name="lastname">
					</label>
				</div>
				<div class="form-group">
					<span id="result"></span>
					<label for="password">Password
						<input type="password" class="form-control" id="password" name="password">
					</label>
				</div>
				<div class="form-group">
					<label for="emailid">EmailId
						<input type="email" class="form-control" id="emailid" name="emailid">
					</label>
				</div>
				<div class="form-group">
					<label for="mobile">Mobile
						<input type="number" class="form-control" id="mobile" name="mobile">
					</label>
				</div>
				<button type="submit" class="btn btn-success">Sign Up</button>
				<button type="reset" class="btn btn-danger">Reset</button>
			</form>
			
		</div>
	</div> -->
	<div class="signup-form">	
			<form id="newEntryForm">
				<h2>Create Account</h2>
				<p class="lead">It's free and hardly takes more than 30 seconds.</p>
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-user"></i></span>
						<input type="text" class="form-control" id="firstname" placeholder="Firstname" required="required">
					</div>
				</div>
				<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon"><i class="fa fa-user"></i></span>
							<input type="text" class="form-control" id="lastname" placeholder="Lastname" required="required">
						</div>
				</div>
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-paper-plane"></i></span>
						<input type="email" class="form-control" name="emailid" id="emailid" placeholder="Email Address" required="required">
						<span id="taken"></span>
					</div>
				</div>
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><i class="fa fa-lock"></i></span>
						<input type="password" class="form-control" name="password" id="password" placeholder="Password" required="required">
						<span id="result"></span>
					</div>
				</div>
				<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon"><i class="fa fa-mobile"></i></span>
							<input type="number" class="form-control" name="mobile" id="mobile" placeholder="Mobile">
				</div>
				</div>
				<!-- <div class="form-group">
					<div class="input-group">
						<span class="input-group-addon">
							<i class="fa fa-lock"></i>
							<i class="fa fa-check"></i>
						</span>
						<input type="text" class="form-control" name="confirm_password" placeholder="Confirm Password" required="required">
					</div>
				</div>         -->
				<div class="form-group">
					<button type="submit" class="btn btn-primary btn-block btn-lg">Sign Up</button>
					<button type="submit" class="btn btn-default btn-block btn-lg">Clear</button>
				</div>
				<p class="small text-center">By clicking the Sign Up button, you agree to our <br><a href="#">Terms &amp; Conditions</a>, and <a href="#">Privacy Policy</a>.</p>
			</form>
			<div class="text-center">Already have an account? <a href="#">Login here</a>.</div>
		</div>
	<script type="text/javascript">
		$(function() {
			$('#newEntryForm').submit(function(event) {
				event.preventDefault();
				var formdata = {
					"firstname": $('#firstname').val(),
					"lastname": $('#lastname').val(),
					"password": $('#password').val(),
					"emailid": $('#emailid').val(),
					"mobile": $('#mobile').val(),
				};
				$.ajax({
					type: "POST",
					url: "/signup", 
					data: formdata,
					success: function(data){
						if(data === "taken"){
							$('#taken').text("This email is taken");
						}
						if(data === "done")
							window.location.replace('http://localhost:3000/public/index.html');
						else
							alert("Registration error. Please retry!");
					},
					failure: function(errMsg) {
						alert("Registration error. Please retry!");
					}
				});
			});
		});
	</script>
</body>
</html>